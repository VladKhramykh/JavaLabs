package app.Servlets.Filters;import app.Entities.User;import app.db.DataBaseHandler;import javax.servlet.*;import javax.servlet.http.Cookie;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import javax.servlet.http.HttpServletResponseWrapper;import javax.xml.ws.ResponseWrapper;import java.io.IOException;import java.sql.SQLException;import java.util.ArrayList;import java.util.Arrays;import java.util.Collection;import java.util.Enumeration;public class IsAuthFilter implements Filter {    public void init(FilterConfig filterConfig) throws ServletException {        System.out.println("filter init");    }    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {        servletRequest.setCharacterEncoding("UTF-8");        HttpServletRequest request = (HttpServletRequest)servletRequest;        HttpServletResponse response = (HttpServletResponse)servletResponse;        String mailCookie=null;        for(Cookie cookie: request.getCookies()){            if(cookie.getName().equals("currentUser"))                mailCookie = cookie.getValue();        }        if(mailCookie == null || mailCookie.equals("")){            response.sendRedirect("auth");        }else{            servletRequest.setAttribute("userMail", mailCookie);            filterChain.doFilter(servletRequest,servletResponse);        }    }    public void destroy() {        System.out.println("filter destroy");    }}